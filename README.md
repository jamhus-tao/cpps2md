# cpps2md V1.3.4 @Jamhus Tao

## 简介

这是一个 `cpp` 转 `markdown` 脚本，主要用于整理板子。文件要求必须以 `cpp` 目录树的形式保存，目前支持模板增量式打印等。



## 配置条件

您的 `cpp` 目录必须满足以下条件：

* `cpp`目录采用文件树的格式，`cpp`文件必须是纯文本的 `cpp` 源代码，有效文件的后缀必须是 `.cpp` ，`.c/.cc/.h/.hpp` 等均不可以。
* 该脚本（`cpps2md.exe/cpp2md.py`）及其相关配置文件必须位于您期望的 `cpp` 目录（工作目录）的 `.bin` 目录下。



您的设备必须满足以下条件：

* `Windows 7` 及以上操作系统。
* 必须安装 `git` 命令行工具，用于模板增量式管理。
* `git` 必须配置环境变量。
* `Markdown` 转 `PDF` 工具，不然生成的 `Markdown` 可能无法打印，这里推荐 `Typora/Pandoc` 。



您需要配置以下配置文件：

* 首先声明，即使你不需要以下配置文件功能，您仍需要创建它，然后它可以不包含任何内容。

* `head.txt`：文件头部，您的文件可能包含一些头部代码，如 `#include <bits/stdc++.h>` 。您可以加入这个头部，之后生成的文件都将去除这个头部。例如：

  `head.txt`：

  ``` cpp
  #include <bits/stdc++.h>
  using namespace std;
  ```

  `example.cpp`：

  ``` cpp
  #include <bits/stdc++.h>
  using namespace std;
  
  void solve() {
  	cout << "hello world!" << endl;
  }
  ```

  `Output`：

  ``` cpp
  void solve() {
  	cout << "hello world!" << endl;
  }
  ```

* `skip.ini`：黑名单条目。

  * 如果被搜索到的目录包含黑名单条目中的任意一条，它将被忽略。
  * 黑名单条目暂不支持 `正则表达式` 与 `XPath` 路径匹配。
  * 另外，一些路径被内置地设为过滤：非`*.cpp`文件、`.*`文件和目录。




## 拓展功能

### 全目录打印

* 启动程序时询问 `Check the modification?` ，回复 `N` 进入全目录打印。
* 全目录打印会搜索并打印全部模板， 并在 `Markdown` 头部生成目录。

### 增量式打印

* 启动程序时询问 `Check the modification?` ，回复 `Y` 进入增量式打印。
* 增量式打印基于 `Git` ，仅打印新建、修改的内容，并提示已删除的内容。

### 命令行模式（如果你会使用 Git）

* 启动程序时输入特殊命令 `CMD` 进入命令行模式。
* 命令行模式支持使用 `Git` 命令行直接对你的仓库进行管理，同时提供了 **全目录打印 / 增量式打印** 的快捷命令。
* `Git` 仓库的存储位置是工作目录下的隐藏文件 `.git.jamhus` 。

* 在启动命令中添加 `-c` 开关，启动时自动进入命令行模式。或者运行提供的 `cpps2md-c.bat` 批处理文件。

### 拖拽启动

* 将要打印的文件同时选中，全部拖拽到脚本上，脚本将以 **参数模式** 启动。
* 拖拽的文件尚不支持是文件夹。
* 拖拽启动与增量式管理系统无关，与工作目录无关。



## 导出格式

程序的导出规范：

* 导出的文件名为 `日期时间.md`，位于目录 `.out`。不支持更改导出目录与导出文件名。
* 导出的 `markdown` 文件中，每个 `cpp` 文件使用一级标题分隔，标题由路径名生成。
* 在 `Typora` 中，您可以设置使用一级标题自动分页导出 `PDF` 这样你的每个 `cpp` 文件都是整页的。但这部分工作脚本不会为你完成。

使用 `pdfOutlineOddPage.exe` 将导出 `PDF` 的所有一级标题固定在奇数页上，用于双面打印。

* 可以双击打开 `pdfOutlineOddPage.exe`，然后根据提示完成，导出文件位于源目录。
* 拖拽图标到 `pdfOutlineOddPage.exe`，等待程序运行结束，导出文件位于源目录。